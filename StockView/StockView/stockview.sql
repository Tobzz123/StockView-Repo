/***********************************************
Script: Stockview.sql
Author: Olaoluwa Anthony-Egorp
Date: September 8rd, 2021
Description: Create StockView database Objects
************************************************/

-- Setting NOCOUNT ON suppresses completion messages for each INSERT
SET NOCOUNT ON

-- Make the master database the current database
USE master
GO
ALTER DATABASE stockview SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
GO

-- If database StockView exists, drop it
IF EXISTS (SELECT  * FROM sysdatabases WHERE name = 'stockview')
 DROP DATABASE stockview;
GO

-- Create the movie_tracker database
CREATE DATABASE stockview;
GO

-- Make the movie_tracker database the current database
USE stockview;


-- Create user table

CREATE TABLE generic_user (
	generic_user_id VARCHAR(4) PRIMARY KEY,
	email VARCHAR(255),
	password_hash VARCHAR(255),
	first_name VARCHAR(255),
	last_name VARCHAR(255),
	generic_user_name VARCHAR(255),
    generic_user_role VARCHAR(255)
	);
GO

-- Create premium user table
/*CREATE TABLE premium_user (
	premium_user_id INT PRIMARY KEY ,
	email VARCHAR(255),
	password_hash VARCHAR(255),
	first_name VARCHAR(255),
	last_name VARCHAR(255),
	prem_user_name VARCHAR(255),
    premium_user_role VARCHAR(255)
);
GO*/

-- Create watchlist table
CREATE TABLE watchlist (
	watchlist_id INT PRIMARY KEY,
	watchlist_name VARCHAR(255),
	generic_user_id VARCHAR(4) FOREIGN KEY REFERENCES generic_user(generic_user_id)
   
	);
GO

-- Create admins table
CREATE TABLE admins (
	admin_id INT PRIMARY KEY,
	email VARCHAR(255),
	first_name VARCHAR(255),
	last_name VARCHAR(255),
	admin_user_name VARCHAR(255),
    admin_user_role VARCHAR(255)
);
GO

-- Create manager table
CREATE TABLE manager (
	manager_id INT PRIMARY KEY,
	email VARCHAR(255),
	first_name VARCHAR(255),
	last_name VARCHAR(255),
	manager_user_name VARCHAR(255),
    manager_user_role VARCHAR(255)
);
GO

-- Create user table
CREATE TABLE usage_data(
	usage_id INT PRIMARY KEY,
	stock_buyers DECIMAL(10,2),
	stock_sellers DECIMAL(10,2)
);
GO

-- Create stocks table
CREATE TABLE stocks (
    Ticker VARCHAR(255) PRIMARY KEY,
    Price DECIMAL(6, 2),
    Volume INT,
    Market_Cap BIGINT,
    Exchange VARCHAR(255),
    Average_Volume INT,
    DayOpen DECIMAL(6, 2),
    DaytClose DECIMAL(6, 2),
    YearlyHigh DECIMAL(6, 2),
    YearlyLow DECIMAL(6, 2)
);
GO

-- Populate stocks table
INSERT INTO stocks VALUES
    ('AAPL',146.92,53477869,2428612000000,'NASDAQ',79789507,145.66,146.83,157.26,105),
    ('AMD',105.8,26482610,128331700000,'NASDAQ',44569210,105.19,106.15,122.49,72.5),
    ('MSFT',299.35,14998978,2249583000000,'NASDAQ',23082489,298.23,299.56,305.84,199.2),
    ('AC',23.54,2523917,8421247000,'TSE',2505690,23.38,23.49,31,14.48),
    ('JMIA',19.83,1905326,1777355000,'NYSE',4215194,19.84,20,69.89,7),
    ('ADBE',622.71,2809022,296659000000,'NASDAQ',1912424,628,630.84,673.88,420.78),
    ('BCE',51.13,663227,58637770000,'NYSE',1222278,51.05,51.23,53,39.91),
    ('DBX',31.54,2010524,12567610000,'NASDAQ',3320623,31.14,31.27,33,17.66),
    ('ENB',27.12,17130,102746300000,'NYSE',29583,27.18,27.2,27.61,24.78),
    ('KEY',21.14,5767032,20217660000,'NYSE',7422733,21.01,20.97,23.65,11.33),
    ('LOTZ',4.06,1155110,461500400,'NASDAQ',2104709,4.06,4.12,12.9,3.62),
    ('NOK',5.58,12200016,32004730000,'NYSE',18703263,5.52,5.58,9.79,3.21),
    ('SDC',5.68,17023973,2204483000,'NASDAQ',24105448,6,6.1,16.08,4.63),
    ('TTCF',19.01,712153,1557918000,'NASDAQ',1933285,19.89,19.93,27.8,14.09),
    ('UPS',188.02,2312896,163773400000,'NYSE',2392176,186.5,186.79,219.59,154.76),
    ('NKE',149.59,26913307,236815600000,'NYSE',5748014,151.04,159.58,174.38,118.8),
    ('FB',352.96,18801933,995151100000,'NASDAQ',13879235,343.24,345.96,384.33,244.61),
    ('FDX',226.64,4973401,60206930000,'NYSE',2977683,228,228.92,319.9,226.6),
    ('PFE',43.94,16150746,246357900000,'NYSE',33940253,44.07,44.19,51.86,32.8),
    ('SQ',262.5,6958900,120670700000,'NYSE',5633127,263.99,266.72,289.23,148),
    ('TSLA',774.39,21373022,766657800000,'NASDAQ',16725929,745.89,753.64,900.4,351.3),
    ('MRNA',430.14,12984587,173624400000,'NASDAQ',13667994,448.08,454.6,497.49,63.64),
    ('PYPL',278.11,3985813,326788200000,'NASDAQ',5720771,276.02,279.1,310.16,174.81),
    ('GM',52.23,11643547,75823530000,'NYSE',17170120,51.88,51.92,64.3,28.24),
    ('AMC',40.01,32555864,20538340000,'NYSE',87437850,39.81,39.98,72.62,1.91),
    ('AMX',109.8,26488610,128346700000,'NASDAQ',44249210,135.19,156.15,129.49,78.5),
    ('INTC',54.22,12976200,219970500000,'NASDAQ',20075428,53.78,54.03,68.49,43.61),
    ('GME',185.16,1685759,14163170000,'NYSE',4042925,191,191.24,483,9.01),
    ('UBER',46.63,29458270,87867090000,'NYSE',29415823,45.46,45.48,64.05,32.89),
    ('V',231.59,6461244,492549600000,'NYSE',7916378,228.93,228.31,252.67,179.23),
    ('ZM',272.36,4051722,80925760000,'NASDAQ',5938053,274.64,276.19,588.84,267.19),
    ('WING',181.5,181546,5398805000,'NASDAQ',251823,182.6,183.24,187.35,108.23),
    ('WKHS',7.52,5953023,932092400,'NASDAQ',7860191,7.48,7.57,42.96,7.05),
    ('TWTR',67.22,11035729,53639310000,'NYSE',9613441,66.09,66.69,80.75,38.93),
    ('TD',65.77,793846,151741300000,'NYSE',1453163,65.51,65.73,73.85,42.9),
    ('TJX',71.1,4802078,85500540000,'NYSE',6663057,70.39,70.7,76.16,50.06),
    ('SPCE',25.04,7887146,6441811000,'NYSE',14083641,25.85,25.85,62.8,14.27),
    ('SONY',117.61,863958,148628900000,'NYSE',533309,116.87,115.5,118.5,72.45),
    ('SNAP',83.11,29039000,131405700000,'NYSE',13725888,78.94,79.37,83.34,24.02),
    ('ROKU',321.89,3630738,42956670000,'NASDAQ',3634431,327,334.52,490.76,176.63),
    ('RIOT',27.93,7881464,2679919000,'NASDAQ',10183242,27.66,29.39,79.5,2.35),
    ('FUBO',25.42,4375340,3601168000,'NYSE',5607409,25.82,25.94,62.29,8.26),
    ('NVDA',220.81,21765545,552025000000,'NASDAQ',29929657,220.7,224.82,230.43,115.67),
    ('NIO',35.38,23755076,57970770000,'NYSE',37111885,35.59,36.01,66.99,16.75),
    ('LYFT',55.86,3322438,18728420000,'NASDAQ',5171127,55.07,55.64,68.28,21.34),
    ('FL',48.23,4471337,5006645000,'NYSE',2621596,49.5,51.95,66.71,31.41),
    ('DASH',220.52,4377856,74521740000,'NYSE',3721047,219.98,217,256.09,110.13),
    ('CRSR',28.04,1135467,2630340000,'NASDAQ',1877981,27.6,27.87,51.37,14.11),
    ('CROX',156.3,1780958,9750858000,'NASDAQ',1618003,160.89,163,163.18,40.66),
    ('CGX',13.13,528472,831682900,'TSE',562995,13.33,13.3,16.76,4.32);
GO

